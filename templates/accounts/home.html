{% extends 'base.html' %}

{% block title %}EyeHealth 20-20-20 - Protect Your Vision with the 20-20-20 Rule{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-gradient position-relative overflow-hidden py-5">
    <!-- Background Elements -->
    <div class="hero-bg-element hero-circle-1"></div>
    <div class="hero-bg-element hero-circle-2"></div>
    <div class="hero-bg-element hero-circle-3"></div>

    <div class="container position-relative">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6 animate-fade-in-up">
                <!-- Early Access Badge -->
                {% if not is_new_app %}
                <div class="urgency-badge mb-3">
                    <i class="fas fa-rocket"></i>
                    <span>Join our growing community of {{ metrics.active_users }}</span>
                </div>
                {% else %}
                <div class="urgency-badge mb-3">
                    <i class="fas fa-seedling"></i>
                    <span>Be among the first to protect your vision</span>
                </div>
                {% endif %}

                <div class="hero-badge mb-4">
                    <i class="fas fa-eye me-2"></i>
                    <span>Clinically Validated • AAO Recommended</span>
                </div>
                <h1 class="hero-title mb-4">
                    Stop Eye Strain Before It
                    <span class="hero-highlight">Damages Your Vision</span>
                </h1>
                <p class="hero-value-prop mb-4">
                    <strong>Your eyes weren't designed for 8+ hours of screen time.</strong> The 20-20-20 rule is clinically proven to reduce digital eye strain - now with smart reminders that actually work.
                </p>

                <!-- Authentic Social Proof -->
                <div class="social-proof-container mb-5">
                    <div class="row text-center">
                        <div class="col-4">
                            <div class="user-count">{{ metrics.active_users }}</div>
                            <small>{% if is_new_app %}Ready to Start{% else %}Users Protected{% endif %}</small>
                        </div>
                        <div class="col-4">
                            <div class="user-count">{{ metrics.total_breaks }}</div>
                            <small>{% if is_new_app %}Awaiting You{% else %}Breaks Taken{% endif %}</small>
                        </div>
                        <div class="col-4">
                            <div class="user-count">{{ metrics.eye_strain_reduction }}</div>
                            <small>{% if is_new_app %}Potential{% else %}Improvement{% endif %}</small>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-column flex-md-row gap-3 mb-4">
                    <a href="{% url 'accounts:signup' %}" class="cta-primary btn btn-lg">
                        <i class="fas fa-shield-alt me-2"></i>Protect My Vision Now
                    </a>
                    <a href="{% url 'accounts:pricing' %}" class="cta-secondary btn btn-lg">
                        <i class="fas fa-play me-2"></i>Watch 60s Demo
                    </a>
                </div>

                <!-- Value Proposition -->
                <div class="value-offer mb-4">
                    <div class="d-flex align-items-center justify-content-center mb-2">
                        <i class="fas fa-heart text-success me-2"></i>
                        <strong>100% Free. All Features Unlocked.</strong>
                    </div>
                    <p class="text-center text-muted mb-0">
                        <small>No credit card • No hidden fees • Forever free</small>
                    </p>
                </div>

                <!-- Security & Trust Badges -->
                <div class="security-badges">
                    <div class="security-badge">
                        <i class="fas fa-check-circle"></i>
                        <span>Free Forever Plan</span>
                    </div>
                    <div class="security-badge">
                        <i class="fas fa-shield-alt"></i>
                        <span>Secure & Private</span>
                    </div>
                    <div class="security-badge">
                        <i class="fas fa-lock"></i>
                        <span>Data Protection</span>
                    </div>
                    <div class="security-badge">
                        <i class="fas fa-bolt"></i>
                        <span>30 Second Setup</span>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 text-center animate-fade-in-up">
                <div class="hero-visual position-relative">
                    <div class="timer-hero-container animate-float">
                        <div class="timer-hero-circle">
                            <div class="timer-hero-display">
                                <div class="timer-hero-time">20:00</div>
                                <div class="timer-hero-label">Next Break</div>
                            </div>
                            <div class="timer-hero-ring"></div>
                            <div class="timer-hero-dots">
                                <div class="dot dot-1"></div>
                                <div class="dot dot-2"></div>
                                <div class="dot dot-3"></div>
                                <div class="dot dot-4"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Floating Elements -->
                    <div class="floating-icon floating-icon-1">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="floating-icon floating-icon-2">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="floating-icon floating-icon-3">
                        <i class="fas fa-chart-line"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <div class="urgency-badge mb-3">
                    <i class="fas fa-info-circle"></i>
                    <span>Digital Eye Strain affects up to 90% of office workers - but it's preventable</span>
                </div>
                <h2 class="display-5 fw-bold mb-3">The Problem is Real. The Solution is Simple.</h2>
                <p class="lead text-muted">
                    Built by a developer who suffered chronic eye strain for 3 years. This isn't just another app - it's the scientifically-proven solution that actually works.
                </p>

                <!-- Trust Signals -->
                <div class="row mt-4">
                    <div class="col-md-4">
                        <div class="trust-badge">
                            <i class="fas fa-user-md"></i>
                            <span>Science-Based Approach</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="trust-badge">
                            <i class="fas fa-certificate"></i>
                            <span>Research-Backed</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="trust-badge">
                            <i class="fas fa-award"></i>
                            <span>Developer-Built Solution</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h4 class="mb-3">Reliable 20-20-20 Timer</h4>
                    <p class="text-muted mb-3">Precise 20-minute intervals with clear break reminders to help you follow the medically-recommended 20-20-20 rule.</p>
                    <div class="feature-benefit">Simple and effective timing</div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h4 class="mb-3">Progress Tracking</h4>
                    <p class="text-muted mb-3">Track your timer sessions, breaks taken, and build healthy habits with simple statistics.</p>
                    <div class="feature-benefit">Monitor your consistency</div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h4 class="mb-3">Smart Notifications</h4>
                    <p class="text-muted mb-3">Clear break reminders that help you maintain the 20-20-20 routine without being disruptive.</p>
                    <div class="feature-benefit">Never miss a break</div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-cog"></i>
                    </div>
                    <h4 class="mb-3">Customizable Settings</h4>
                    <p class="text-muted mb-3">Adjust notification preferences, work hours, and break duration to fit your schedule and needs.</p>
                    <div class="feature-benefit">Fits your workflow</div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h4 class="mb-3">Privacy Focused</h4>
                    <p class="text-muted mb-3">Your eye health data stays private. No tracking, no data selling - just a simple tool to help you.</p>
                    <div class="feature-benefit">Your data, your control</div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card text-center">
                    <div class="feature-icon-wrapper">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h4 class="mb-3">Health First Approach</h4>
                    <p class="text-muted mb-3">Built on scientifically-proven principles recommended by eye care professionals worldwide.</p>
                    <div class="feature-benefit">Evidence-based solution</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Authentic Statistics Section -->
<section class="bg-light py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card h-100">
                    <div class="stat-number">{{ metrics.eye_strain_reduction }}</div>
                    <div class="stat-label">{% if is_new_app %}Journey Starts{% else %}Progress{% endif %}</div>
                    <div class="stat-description">{% if is_new_app %}Your eye health improvement begins here{% else %}Real user progress{% endif %}</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card h-100">
                    <div class="stat-number">{{ metrics.active_users }}</div>
                    <div class="stat-label">{% if is_new_app %}Community{% else %}Active Users{% endif %}</div>
                    <div class="stat-description">{% if is_new_app %}Growing together from day one{% else %}Protecting their vision daily{% endif %}</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card h-100">
                    <div class="stat-number">{{ metrics.total_breaks }}</div>
                    <div class="stat-label">{% if is_new_app %}Potential{% else %}Breaks Taken{% endif %}</div>
                    <div class="stat-description">{% if is_new_app %}Healthy breaks waiting for you{% else %}Eye-healthy breaks completed{% endif %}</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="stat-card h-100">
                    <div class="stat-number">{{ metrics.satisfaction_rate }}</div>
                    <div class="stat-label">{% if is_new_app %}Mission{% else %}Success Rate{% endif %}</div>
                    <div class="stat-description">{% if is_new_app %}Building something amazing together{% else %}Users achieving their goals{% endif %}</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold mb-3">How It Works</h2>
                <p class="lead text-muted">
                    Simple, effective, and scientifically backed - start protecting your vision in 3 easy steps.
                </p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 text-center">
                <div class="mb-4">
                    <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                        <span class="fs-2 fw-bold">1</span>
                    </div>
                </div>
                <h4>Set Your Preferences</h4>
                <p class="text-muted">Customize your work hours, break duration, and notification preferences to fit your schedule.</p>
            </div>
            <div class="col-lg-4 text-center">
                <div class="mb-4">
                    <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                        <span class="fs-2 fw-bold">2</span>
                    </div>
                </div>
                <h4>Start Your Work Session</h4>
                <p class="text-muted">Click start and focus on your work. We'll remind you to take a break every 20 minutes automatically.</p>
            </div>
            <div class="col-lg-4 text-center">
                <div class="mb-4">
                    <div class="bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                        <span class="fs-2 fw-bold">3</span>
                    </div>
                </div>
                <h4>Take Regular Breaks</h4>
                <p class="text-muted">Follow the 20-20-20 rule: look at something 20 feet away for 20 seconds. Track your progress and improve your eye health.</p>
            </div>
        </div>
    </div>
</section>

<!-- Science-Based Benefits Section -->
<section class="bg-light py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2 class="display-5 fw-bold mb-3">Clinically Proven Benefits</h2>
                <p class="lead text-muted">
                    The 20-20-20 rule is backed by eye care professionals and scientific research
                </p>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-lg-4">
                <div class="testimonial-card slide-up-fade">
                    <div class="testimonial-quote">
                        <i class="fas fa-user-md text-primary fa-2x mb-3"></i><br>
                        Recommended by the American Optometric Association for reducing digital eye strain symptoms.
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-info">
                            <h6>Medical Endorsement</h6>
                            <small>American Optometric Association</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="testimonial-card slide-up-fade">
                    <div class="testimonial-quote">
                        <i class="fas fa-microscope text-success fa-2x mb-3"></i><br>
                        Clinical studies show regular breaks can significantly reduce eye strain, headaches, and dry eyes.
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-info">
                            <h6>Research Evidence</h6>
                            <small>Peer-reviewed studies</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="testimonial-card slide-up-fade">
                    <div class="testimonial-quote">
                        <i class="fas fa-shield-alt text-warning fa-2x mb-3"></i><br>
                        Simple prevention is more effective than treating digital eye strain after it develops.
                    </div>
                    <div class="testimonial-author">
                        <div class="testimonial-info">
                            <h6>Prevention Focus</h6>
                            <small>Proactive eye health</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professional Audience Section -->
<section class="bg-primary text-white py-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-10 mx-auto">
                <h2 class="mb-4">Built for Digital Professionals</h2>
                <p class="lead mb-4">Whether you're a developer, designer, student, or office worker - if you spend hours looking at screens, this tool is for you.</p>

                <div class="row">
                    <div class="col-md-3 col-6 mb-4">
                        <i class="fas fa-laptop-code fa-3x mb-3 opacity-75"></i>
                        <h6>Developers</h6>
                        <small>Code without strain</small>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <i class="fas fa-paint-brush fa-3x mb-3 opacity-75"></i>
                        <h6>Designers</h6>
                        <small>Create comfortably</small>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <i class="fas fa-graduation-cap fa-3x mb-3 opacity-75"></i>
                        <h6>Students</h6>
                        <small>Study smartly</small>
                    </div>
                    <div class="col-md-3 col-6 mb-4">
                        <i class="fas fa-briefcase fa-3x mb-3 opacity-75"></i>
                        <h6>Office Workers</h6>
                        <small>Work healthily</small>
                    </div>
                </div>

                <div class="mt-5">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="fas fa-clock fa-2x me-3"></i>
                                <div>
                                    <h5 class="mb-1">Simple & Effective</h5>
                                    <small>Just click start and focus on work</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="fas fa-chart-line fa-2x me-3"></i>
                                <div>
                                    <h5 class="mb-1">Track Progress</h5>
                                    <small>See your eye health improve</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-flex align-items-center justify-content-center">
                                <i class="fas fa-heart fa-2x me-3"></i>
                                <div>
                                    <h5 class="mb-1">Prevention First</h5>
                                    <small>Stop problems before they start</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="urgency-badge mb-4">
                    <i class="fas fa-clock"></i>
                    <span>Don't wait until eye damage is permanent</span>
                </div>

                <h2 class="display-5 fw-bold mb-3">Your Eyes Can't Wait Another Day</h2>
                <p class="lead text-muted mb-4">
                    <strong>Digital eye strain leads to permanent vision problems.</strong> {% if is_new_app %}Be among the first to choose prevention over regret.{% else %}Join {{ metrics.active_users }} who chose prevention over regret.{% endif %} Start your transformation today.
                </p>
                <div class="d-flex flex-column flex-md-row justify-content-center gap-3">
                    <a href="{% url 'accounts:signup' %}" class="cta-primary btn btn-lg">
                        <i class="fas fa-shield-alt me-2"></i>Protect My Vision Now
                    </a>
                    <a href="{% url 'accounts:pricing' %}" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-info-circle me-2"></i>Learn More
                    </a>
                </div>
                <div class="mt-4">
                    <div class="d-flex flex-wrap justify-content-center gap-3">
                        <small class="trust-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span>Secure & Private</span>
                        </small>
                        <small class="trust-badge">
                            <i class="fas fa-lock"></i>
                            <span>Data Protection</span>
                        </small>
                        <small class="trust-badge">
                            <i class="fas fa-heart"></i>
                            <span>30-Day Guarantee</span>
                        </small>
                        <small class="trust-badge">
                            <i class="fas fa-award"></i>
                            <span>Open Source Spirit</span>
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Animate the demo timer on page load
    document.addEventListener('DOMContentLoaded', function() {
        const timerDisplay = document.querySelector('.timer-display');
        if (timerDisplay) {
            let seconds = 1200; // 20 minutes

            function updateTimer() {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerDisplay.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                if (seconds > 0) {
                    seconds--;
                    setTimeout(updateTimer, 100); // Fast demo animation
                }
            }

            setTimeout(updateTimer, 2000); // Start after 2 seconds
        }

        // Simple animation for value proposition
        const valueOffer = document.querySelector('.value-offer');
        if (valueOffer) {
            setTimeout(() => {
                valueOffer.style.opacity = '1';
                valueOffer.style.transform = 'translateY(0)';
            }, 500);
        }

        // Animate user count on scroll (only for numeric values)
        function animateCounters() {
            const counters = document.querySelectorAll('.user-count');

            counters.forEach((counter) => {
                const text = counter.textContent.trim();
                // Only animate if the content is purely numeric
                const numericMatch = text.match(/^(\d+)(.*)$/);

                if (numericMatch) {
                    const target = parseInt(numericMatch[1]);
                    const suffix = numericMatch[2];
                    let current = 0;
                    const increment = Math.max(1, target / 50);

                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= target) {
                            current = target;
                            clearInterval(timer);
                        }
                        counter.textContent = Math.floor(current) + suffix;
                    }, 30);
                }
                // Non-numeric content (like "Building community") stays as-is
            });
        }

        // Trigger counter animation on page load (only if we have numeric data)
        const hasNumericCounters = Array.from(document.querySelectorAll('.user-count')).some(counter => {
            return /^\d+/.test(counter.textContent.trim());
        });

        if (hasNumericCounters) {
            setTimeout(animateCounters, 1000);
        }

        // Enhanced scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('slide-up-fade');
                }
            });
        }, observerOptions);

        // Observe feature cards and testimonials
        document.querySelectorAll('.feature-card, .testimonial-card, .stat-card').forEach(el => {
            observer.observe(el);
        });
    });
</script>
{% endblock %}